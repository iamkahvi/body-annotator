<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Body Annotator</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="styles.css">

</head>
<body>
  <div class="app">
    <header>
      <h1>Body Log</h1>
    </header>

    <main>
      <section class="body-section">
        <div id="body-3d-container" class="body-3d-container"></div>
        <p class="hint">Click a body part to add a note.</p>
      </section>

      <section class="notes-section">
        <div class="notes-controls">
          <input type="search" id="search" placeholder="Search notes..." />
          <select id="sort">
            <option value="date-desc">Newest first</option>
            <option value="date-asc">Oldest first</option>
            <option value="body-part">By body part</option>
          </select>
          <select id="filter-status">
            <option value="all">All Status</option>
            <option value="active">Active Only</option>
            <option value="resolved">Resolved Only</option>
          </select>
          <select id="filter-part">
            <option value="">All body parts</option>
          </select>
        </div>
        <div id="notes-list" class="notes-list"></div>
      </section>
    </main>

    <section class="data-section">
      <div class="data-actions">
        <button id="export-data-btn" class="btn-secondary">Export data</button>
        <button id="import-data-btn" class="btn-secondary">Import data</button>
      </div>
      <p class="data-hint">Copy and paste your data to move it between devices.</p>
    </section>

    <!-- Modal -->
    <div id="modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Add Note</h2>
          <div class="modal-header-actions">
            <button id="edit-btn" class="icon-button" aria-label="Edit note">
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zm2.92 2.83H5v-.92l9.06-9.06.92.92-9.06 9.06zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"></path>
              </svg>
            </button>
            <button id="close-modal-btn" class="modal-close">&times;</button>
          </div>
        </div>
        <div id="modal-display" class="modal-section hidden">
          <div class="note-display-meta">
            <span id="display-date-range" class="note-display-date"></span>
            <span id="display-duration" class="note-display-duration"></span>
          </div>
          <p id="display-description" class="note-display-text"></p>
        </div>

        <div id="modal-edit" class="modal-section">
          <label class="field-label" for="note-start-date">Start date</label>
          <input type="date" id="note-start-date" />
          <label class="field-label" for="note-end-date">End date</label>
          <input type="date" id="note-end-date" />
          <label class="field-label" for="note-text">Description</label>
          <textarea id="note-text" placeholder="Describe the sensation or injury..." rows="4"></textarea>
          <!-- Timeline -->
          <div id="timeline-section" class="timeline-section hidden">
            <label class="field-label">Timeline</label>
            <div id="timeline-container" class="timeline-container">
              <!-- Canvas for drawing the timeline -->
              <canvas id="timeline-canvas"></canvas>
            </div>
            <div class="timeline-stats">
              <span id="timeline-start"></span>
              <span id="timeline-duration"></span>
            </div>
          </div>
        </div>

        <div class="modal-actions">
          <div id="modal-actions-display" class="modal-actions-row hidden">
            <button id="resolve-btn" class="btn-success hidden">âœ“ Resolve</button>
          </div>
          <div id="modal-actions-edit" class="modal-actions-row">
            <button id="cancel-edit-btn" class="btn-secondary">Back</button>
            <div class="spacer"></div>
            <button id="delete-btn" class="btn-danger hidden">Delete</button>
            <button id="save-btn" class="btn-primary">Save</button>
          </div>
        </div>
      </div>
    </div>

    <div id="data-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="data-modal-title">Export data</h2>
          <button id="data-modal-close" class="modal-close">&times;</button>
        </div>
        <p id="data-modal-help" class="data-modal-help"></p>
        <textarea id="data-textarea" class="data-textarea" rows="8" spellcheck="false"></textarea>
        <p id="data-status" class="data-status" aria-live="polite"></p>
        <div class="modal-actions">
          <div class="modal-actions-row">
            <button id="data-copy-btn" class="btn-secondary">Copy</button>
            <div class="spacer"></div>
            <button id="data-action-btn" class="btn-primary">Import</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
